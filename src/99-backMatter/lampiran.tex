%-----------------------------------------------------------------------------%
\addappendix{Kode Simulasi}
\chapter*{Lampiran 1: Kode Simulasi}
\begin{enumerate}
    \item Repositori kode: \url{https://github.com/carlesoctav/beir-skripsi} 
    \item Repositori model dan data: \url{https://huggingface.co/carles-undergrad-thesis}
    \item Repositori data (\f{raw}): \url{https://drive.google.com/drive/folders/1l_fbqJSn2AR8f-g1QnANl5czm2aLO0rO}
\end{enumerate}

\lstinputlisting[language=Python, caption=Kode untuk mengevaluasi $\text{BERT}_{\text{DOT}}$, label=code:python]{assets/codes/beir-skripsi/experiments/hardnegs_bm25/eval_miracl_hardnegs.py}

\newpage

\lstinputlisting[language=Python, caption=Kode untuk mengevaluasi $\text{BERT}_{\text{CAT}}$, label=code:python]{assets/codes/beir-skripsi/experiments/bertcat_trained/eval_mrtydi_bertcat.py}

\newpage

\lstinputlisting[language=Python, caption=Kode untuk mengevaluasi BM25, label=code:python]{assets/codes/beir-skripsi/experiments/bm25/eval_miracl_bm25.py}

\newpage

\lstinputlisting[language=Python, caption=Kode untuk melatih  $\text{IndoBERT}_{\text{CAT}}$, label=code:python]{assets/codes/beir-skripsi/experiments/bertcat_trained/train.py}

\newpage

\lstinputlisting[language=Python, caption=Kode untuk melatih $\text{IndoBERT}_{\text{DOT}}$, label=code:python]{assets/codes/beir-skripsi/experiments/in_batch/train.py} 

\newpage

\lstinputlisting[language=Python, caption=Kode untuk melatih $\text{IndoBERT}_{\text{DOTKD}}$, label=code:python]{assets/codes/beir-skripsi/experiments/knowledge-distill-train/train.py}

\newpage

\lstinputlisting[language=Python, caption=Kode untuk melatih $\text{IndoBERT}_{\text{DOThardnegs}}$ dengan \f{hard negatives}, label=code:python]{assets/codes/beir-skripsi/experiments/hardnegs_bm25/train.py}



%-----------------------------------------------------------------------------%

%-----------------------------------------------------------------------------%
\addappendix{Output dari Simulasi}
\chapter*{Lampiran 2: \f{Output} dari Simulasi}
\label{appendix:output}
Terlampir contoh \f{output} pengevaluasian dari suatu model, Informasi lebih lanjut dapat dilihat di \url{https://github.com/carlesoctav/beir-skripsi}.


2023-12-07 04:44:23 - NDCG@1: 0.3719
2023-12-07 04:44:23 - NDCG@3: 0.3419
2023-12-07 04:44:23 - NDCG@5: 0.3503
2023-12-07 04:44:23 - NDCG@10: 0.3741
2023-12-07 04:44:23 - NDCG@100: 0.4542
2023-12-07 04:44:23 - NDCG@1000: 0.4840
2023-12-07 04:44:23 - 

2023-12-07 04:44:23 - MAP@1: 0.1635
2023-12-07 04:44:23 - MAP@3: 0.2388
2023-12-07 04:44:23 - MAP@5: 0.2655
2023-12-07 04:44:23 - MAP@10: 0.2864
2023-12-07 04:44:23 - MAP@100: 0.3114
2023-12-07 04:44:23 - MAP@1000: 0.3134
2023-12-07 04:44:23 - 

2023-12-07 04:44:23 - Recall@1: 0.1635
2023-12-07 04:44:23 - Recall@3: 0.2883
2023-12-07 04:44:23 - Recall@5: 0.3552
2023-12-07 04:44:23 - Recall@10: 0.4322
2023-12-07 04:44:23 - Recall@100: 0.7025
2023-12-07 04:44:23 - Recall@1000: 0.8718
2023-12-07 04:44:23 - 

2023-12-07 04:44:23 - P@1: 0.3719
2023-12-07 04:44:23 - P@3: 0.2465
2023-12-07 04:44:23 - P@5: 0.1933
2023-12-07 04:44:23 - P@10: 0.1247
2023-12-07 04:44:23 - P@100: 0.0221
2023-12-07 04:44:23 - P@1000: 0.0028
2023-12-07 04:44:23 - 

2023-12-07 04:44:24 - MRR@1: 0.3719
2023-12-07 04:44:24 - MRR@3: 0.4509
2023-12-07 04:44:24 - MRR@5: 0.4697
2023-12-07 04:44:24 - MRR@10: 0.4788
2023-12-07 04:44:24 - MRR@100: 0.4855
2023-12-07 04:44:24 - MRR@1000: 0.4859
2023-12-07 04:44:24 - 



\inpdf{assets/pdfs/mmarco-report}

\add{Tabel Metrik}
\chapter*{Lampiran 3: Tabel Metrik}
\label{appendix:metrik}

\begin{table}
    \centering
    \caption{Hasil evaluasi model pada Metrik \f{Reciprocal Rank} pada tiga \f{dataset} yang digunakan.}
    \label{tab:evalrr}
    \begin{tabular}{lccccc}
        \hline
        Model & RR@1 & RR@3 & RR@5 & RR@10 & RR@100 \\ 
        \hline
        \multicolumn{6}{c}{\textbf{mMARCO}} \\
        BM25 & 0.0662 & 0.0968 & 0.1061 & 0.1143 & 0.1226 \\
        BM25+$\text{IndoBERT}_{\text{CAT}}$  & ... & ... & ... & ... & ... \\
        $\text{IndoBERT}_{\text{DOT}}$ & 0.1033 & 0.1543 & 0.1696 & 0.1818 & 0.1924 \\
        $\text{IndoBERT}_{\text{DOThardnegs}} $ & 0.1483 & 0.2057 & 0.2208 & 0.2328 & 0.2430 \\
        $\text{IndoBERT}_{\text{DOTKD}}$ & 0.1476 & 0.2065 & 0.2222 & 0.2355 & 0.2461 \\
        \hline
        \multicolumn{6}{c}{\textbf{MrTyDI}} \\
        BM25 & 0.1858 & 0.2481 & 0.2659 & 0.2792 & 0.2898 \\
        BM25+$\text{IndoBERT}_{\text{CAT}}$  & ... & ... & ... & ... & ... \\
        $\text{IndoBERT}_{\text{DOT}}$ & 0.1918 & 0.2788 & 0.3068 & 0.3249 & 0.3349 \\
        $\text{IndoBERT}_{\text{DOThardnegs}} $ &  0.3764 & 0.4473 & 0.4608 & 0.4711 & 0.4779 \\
        $\text{IndoBERT}_{\text{DOTKD}}$ & 0.2955 & 0.3693 & 0.3849 & 0.3936 & 0.4013 \\
        \hline
        \multicolumn{6}{c}{\textbf{Miracl}} \\
        BM25 & 0.3510 & 0.4385 & 0.4596 & 0.4723 & 0.4815 \\
        BM25+$\text{IndoBERT}_{\text{CAT}}$  & ... & ... & ... & ... & ... \\
        $\text{IndoBERT}_{\text{DOT}}$ & 0.2385 & 0.3450 & 0.3658 & 0.3808 & 0.3920 \\
        $\text{IndoBERT}_{\text{DOThardnegs}} $ & 0.4146 & 0.4901 & 0.5070 & 0.5170 & 0.5238 \\
        $\text{IndoBERT}_{\text{DOTKD}}$ & 0.3719 & 0.4509 & 0.4697 & 0.4788 & 0.4855 \\
        \hline
        
        \end{tabular}
        
\end{table}


\newpage

\begin{table}
    \centering
    \caption{Hasil evaluasi model pada Metrik \f{Recall} pada tiga \f{dataset} yang digunakan.}
    \label{tab:evalrecall}
    \begin{tabular}{lccccc}
        \hline
        Model & R@1 & R@3 & R@5 & R@10 & R@100 \\ 
        \hline
        \multicolumn{6}{c}{\textbf{mMARCO}} \\
        BM25 & 0.0641 & 0.1334 & 0.1735 & 0.2350 & 0.4475 \\
        BM25+$\text{IndoBERT}_{\text{CAT}}$  & ... & ... & ... & ... & ... \\
        $\text{IndoBERT}_{\text{DOT}}$ & 0.1010 & 0.2168 & 0.2824 & 0.3724 & 0.6506 \\
        $\text{IndoBERT}_{\text{DOThardnegs}} $ & 0.1444 & 0.2738 & 0.3383 & 0.4273 & 0.6807 \\
        $\text{IndoBERT}_{\text{DOTKD}}$ & 0.1436 & 0.2768 & 0.3446 & 0.4427 & 0.7052 \\
        \hline
        \multicolumn{6}{c}{\textbf{MrTyDI}} \\
        BM25 & 0.1705 & 0.3040 & 0.3828 & 0.4755 & 0.7230 \\
        BM25+$\text{IndoBERT}_{\text{CAT}}$  & ... & ... & ... & ... & ... \\
        $\text{IndoBERT}_{\text{DOT}}$ & 0.1707 & 0.3639 & 0.4811 & 0.6118 & 0.8520 \\
        $\text{IndoBERT}_{\text{DOThardnegs}} $ & 0.3428 & 0.4181 & 0.4349 & 0.4475 & 0.4553 \\
        $\text{IndoBERT}_{\text{DOTKD}}$ & 0.2680 & 0.4323 & 0.5022 & 0.5700 & 0.7513 \\
        \hline
        \multicolumn{6}{c}{\textbf{Miracl}} \\
        BM25 & 0.1652 & 0.2899 & 0.3636 & 0.4734 & 0.8116 \\
        BM25+$\text{IndoBERT}_{\text{CAT}}$  & ... & ... & ... & ... & ... \\
        $\text{IndoBERT}_{\text{DOT}}$ & 0.1089 & 0.2475 & 0.3145 & 0.4146 & 0.7415 \\
        $\text{IndoBERT}_{\text{DOThardnegs}} $ & 0.1787 & 0.3043 & 0.3678 & 0.4552 & 0.7266 \\
        $\text{IndoBERT}_{\text{DOTKD}}$ & 0.1635 & 0.2883 & 0.3552 & 0.4322 & 0.7025 \\
        \hline
        
        \end{tabular}
        
\end{table}


\newpage


\begin{table}
    \centering
    \caption{Hasil evaluasi model pada Metrik \f{ndcg} pada tiga \f{dataset} yang digunakan.}
    \label{tab:evalndcg}
    \begin{tabular}{lccccc}
        \hline
        Model & NDCG@1 & NDCG@3 & NDCG@5 & NDCG@10 & NDCG@100 \\
        \hline
        \multicolumn{6}{c}{\textbf{mMARCO}} \\
        BM25 & 0.0660 & 0.1048 & 0.1215 & 0.1415 & 0.1857 \\
        BM25+$\text{IndoBERT}_{\text{CAT}}$  & ... & ... & ... & ... & ... \\
        $\text{IndoBERT}_{\text{DOT}}$ & 0.1034 & 0.1687 & 0.1960 & 0.2254 & 0.2830 \\
        $\text{IndoBERT}_{\text{DOThardnegs}} $ & 0.1483 & 0.2212 & 0.2480 & 0.2771 & 0.3305 \\
        $\text{IndoBERT}_{\text{DOTKD}}$ & 0.1476 & 0.2223 & 0.2505 & 0.2826 & 0.3379 \\
        \hline
        \multicolumn{6}{c}{\textbf{MrTyDI}} \\
        BM25 & 0.1846 & 0.2527 & 0.2860 & 0.3170 & 0.3727 \\
        BM25+$\text{IndoBERT}_{\text{CAT}}$  & ... & ... & ... & ... & ... \\
        $\text{IndoBERT}_{\text{DOT}}$  & 0.1918 & 0.2916 & 0.3413 & 0.3858 & 0.4391 \\
        $\text{IndoBERT}_{\text{DOThardnegs}} $ & 0.3764 & 0.4467 & 0.4743 & 0.5026 & 0.5404 \\
        $\text{IndoBERT}_{\text{DOTKD}}$ & 0.2955 & 0.3734 & 0.4030 & 0.4255 & 0.4657 \\
        \hline
        \multicolumn{6}{c}{\textbf{Miracl}} \\
        BM25 & 0.3510 & 0.3373 & 0.3531 & 0.3915 & 0.4935 \\
        BM25+$\text{IndoBERT}_{\text{CAT}}$  & ... & ... & ... & ... & ... \\
        $\text{IndoBERT}_{\text{DOT}}$ & 0.2385 & 0.2655 & 0.2834 & 0.3196 & 0.4188 \\
        $\text{IndoBERT}_{\text{DOThardnegs}} $ & 0.4146 & 0.3688 & 0.3700 & 0.3977 & 0.4776 \\
        $\text{IndoBERT}_{\text{DOTKD}}$ & 0.3719 & 0.3419 & 0.3503 & 0.3741 & 0.4542 \\
        \hline
        
        \end{tabular}
        
\end{table}

\newpage

\begin{table}
    \centering
    \caption{Hasil evaluasi model pada Metrik \f{Precision} pada tiga \f{dataset} yang digunakan.}
    \label{tab:evalprecision}
    \begin{tabular}{lccccc}
        \hline
        Model & P@1 & P@3 & P@5 & P@10 & P@100 \\
        \hline
        \multicolumn{6}{c}{\textbf{mMARCO}} \\
        BM25 & 0.0660 & 0.0459 & 0.0360 & 0.0245 & 0.0047 \\
        BM25+$\text{IndoBERT}_{\text{CAT}}$  & ... & ... & ... & ... & ... \\
        $\text{IndoBERT}_{\text{DOT}}$ & 0.01034 & 0.0744 & 0.0583 & 0.0387 & 0.0068 \\
        $\text{IndoBERT}_{\text{DOThardnegs}} $ & 0.1483 & 0.0942 & 0.0701 & 0.0444 & 0.0072 \\
        $\text{IndoBERT}_{\text{DOTKD}}$ &  0.1476 & 0.0956 & 0.0716 & 0.0461 & 0.0074 \\
        \hline
        \multicolumn{6}{c}{\textbf{MrTyDI}} \\
        BM25 & 0.1846 & 0.1122 & 0.0849 & 0.0532 & 0.0083 \\
        BM25+$\text{IndoBERT}_{\text{CAT}}$  & ... & ... & ... & ... & ... \\
        $\text{IndoBERT}_{\text{DOT}}$ & 0.1918 & 0.1367 & 0.1086 & 0.0698 & 0.0098 \\
        $\text{IndoBERT}_{\text{DOThardnegs}} $ & 0.3764 & 0.1870 & 0.1279 & 0.0742 & 0.0095 \\
        $\text{IndoBERT}_{\text{DOTKD}}$ & 0.2955 & 0.1616 & 0.1129 & 0.0640 & 0.0086 \\
        \hline
        \multicolumn{6}{c}{\textbf{Miracl}} \\
        BM25 & 0.3510 & 0.2427 & 0.1975 & 0.1352 & 0.0256 \\
        BM25+$\text{IndoBERT}_{\text{CAT}}$  & ... & ... & ... & ... & ... \\
        $\text{IndoBERT}_{\text{DOT}}$ & 0.2385 & 0.2004 & 0.1631 & 0.1144 & 0.0232 \\
        $\text{IndoBERT}_{\text{DOThardnegs}} $ & 0.4146 & 0.2611 & 0.1963 & 0.1290 & 0.0225 \\
        $\text{IndoBERT}_{\text{DOTKD}}$ & 0.3719 & 0.2465 & 0.1933 & 0.1247 & 0.0221 \\
        \hline
        
        \end{tabular}
        
\end{table}

\newpage

\begin{table}
    \centering
    \caption{Hasil evaluasi model pada Metrik \f{Mean Average Precision} pada tiga \f{dataset} yang digunakan.}
    \label{tab:evalmap}
    \begin{tabular}{lccccc}
        \hline
        Model & MAP@1 & MAP@3 & MAP@5 & MAP@10 & MAP@100 \\
        \hline
        \multicolumn{6}{c}{\textbf{mMARCO}} \\
        BM25 & 0.0641 & 0.0940 & 0.1033 & 0.1116 & 0.1199 \\
        BM25+$\text{IndoBERT}_{\text{CAT}}$  & ... & ... & ... & ... & ... \\
        $\text{IndoBERT}_{\text{DOT}}$ & 0.010 & 0.1510 & 0.1661 & 0.1783 & 0.1892 \\
        $\text{IndoBERT}_{\text{DOThardnegs}} $ & 0.1444 & 0.2016 & 0.2165 & 0.2285 & 0.2390 \\
        $\text{IndoBERT}_{\text{DOTKD}}$ & 0.1436 & 0.2019 & 0.2176 & 0.2310 & 0.2418 \\
        \hline
        \multicolumn{6}{c}{\textbf{MrTyDI}} \\
        BM25 & 0.1705 & 0.2284 & 0.2475 & 0.2605 & 0.2731 \\
        BM25+$\text{IndoBERT}_{\text{CAT}}$  & ... & ... & ... & ... & ... \\
        $\text{IndoBERT}_{\text{DOT}}$ & 0.1707 & 0.2603 & 0.2883 & 0.3077 & 0.3194 \\
        $\text{IndoBERT}_{\text{DOThardnegs}} $ & 0.3428 & 0.4181 & 0.4349 & 0.4475 & 0.4553 \\
        $\text{IndoBERT}_{\text{DOTKD}}$ & 0.2680 & 0.3450 & 0.3622 & 0.3719 & 0.3806 \\
        \hline
        \multicolumn{6}{c}{\textbf{Miracl}} \\
        BM25 & 0.1652 & 0.2395 & 0.2685 & 0.2987 & 0.3323 \\
        BM25+$\text{IndoBERT}_{\text{CAT}}$  & ... & ... & ... & ... & ... \\
        $\text{IndoBERT}_{\text{DOT}}$ & 0.1089 & 0.1827 & 0.2062 & 0.2302 & 0.2600 \\
        $\text{IndoBERT}_{\text{DOThardnegs}} $ & 0.1787 & 0.2573 & 0.2820 & 0.3054 & 0.3297 \\
        $\text{IndoBERT}_{\text{DOTKD}}$ & 0.1635 & 0.2388 & 0.2655 & 0.2864 & 0.3114 \\
        \hline
        
        \end{tabular}
        
\end{table}
